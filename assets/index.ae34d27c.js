(function(){const E=document.createElement("link").relList;if(E&&E.supports&&E.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))o(i);new MutationObserver(i=>{for(const r of i)if(r.type==="childList")for(const O of r.addedNodes)O.tagName==="LINK"&&O.rel==="modulepreload"&&o(O)}).observe(document,{childList:!0,subtree:!0});function A(i){const r={};return i.integrity&&(r.integrity=i.integrity),i.referrerpolicy&&(r.referrerPolicy=i.referrerpolicy),i.crossorigin==="use-credentials"?r.credentials="include":i.crossorigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function o(i){if(i.ep)return;i.ep=!0;const r=A(i);fetch(i.href,r)}})();const f=15;let G=0;const T={NAME:"PlayerName",HEALTH_MAX:100,HEALTH_CURRENT:100,HEALTH_REGEN:1,DAMAGE:5,ATTACK_TIMER:0,ATTACK_COOLDOWN:220,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD:500,RESPAWN_TIMER:0,base:{HEALTH_MAX:100,HEALTH_REGEN:5,DAMAGE:5,ATTACK_COOLDOWN:220,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05},IS_PLAYABLE_CHARACTER:!0,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPos:0,portrait:document.getElementById("playerPortrait"),image:document.getElementById("playerImage"),frameState:{idle:["assets/combatzone/player/player_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("playerHealthBar"),attackTimerBar:document.getElementById("playerAttackBar"),statFrame:{spnAttack:document.getElementById("spnPlayerAttack"),spnHealthMax:document.getElementById("spnPlayerHealthMax"),spnAttackSpeed:document.getElementById("spnPlayerAttackSpeed")}},t={NAME:"Slime",HEALTH_MAX:20,HEALTH_CURRENT:20,HEALTH_REGEN:.1,DAMAGE:3,ATTACK_TIMER:0,ATTACK_COOLDOWN:310,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD_DROP:5,RESPAWN_TIMER:0,LEVEL:1,base:{HEALTH_MAX:20,HEALTH_REGEN:.1,DAMAGE:3,GOLD_DROP:5},multiplier:{HEALTH_MAX:1.6,HEALTH_REGEN:1.05,DAMAGE:1.4,GOLD_DROP:1.5},IS_PLAYABLE_CHARACTER:!1,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPosReversed:0,portrait:document.getElementById("enemyPortrait"),image:document.getElementById("enemyImage"),frameState:{idle:["assets/combatzone/enemy/slime_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("enemyHealthBar"),attackTimerBar:document.getElementById("enemyAttackBar")},n={ATTACK:{NAME:"ATTACK",COST:0,BASE_COST:6,BASE_POWER:2,COST_MULTIPLIER:1.6,POWER_MULTIPLIER:1.3,BOUGHT:0,DOM:document.getElementById("shopBtnAttack")},HEALTH:{NAME:"HEALTH",COST:0,BASE_COST:6,BASE_POWER:5,COST_MULTIPLIER:1.4,POWER_MULTIPLIER:1.25,BOUGHT:0,DOM:document.getElementById("shopBtnHealth")},HEALTH_REGEN:{NAME:"HEALTH REGENERATION",COST:0,BASE_COST:6,BASE_POWER:1,COST_MULTIPLIER:1.2,POWER_MULTIPLIER:1.15,BOUGHT:0,DOM:document.getElementById("shopBtnHealthRegen")},ATTACK_SPEED:{NAME:"ATTACK SPEED",COST:0,BASE_COST:30,BASE_POWER:3,COST_MULTIPLIER:2.1,POWER_MULTIPLIER:.9,BOUGHT:0,DOM:document.getElementById("shopBtnAttackSpeed")},CRIT_CHANCE:{NAME:"CRIT CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.5,POWER_MULTIPLIER:.6,BOUGHT:1,DOM:document.getElementById("shopBtnCritChance")},CRIT_MULTIPLIER:{NAME:"CRIT MULTIPLIER",COST:0,BASE_COST:6,BASE_POWER:.1,COST_MULTIPLIER:1.1,POWER_MULTIPLIER:1.1,BOUGHT:0,DOM:document.getElementById("shopBtnCritMultiplier")},BLOCK_CHANCE:{NAME:"BLOCK CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.9,POWER_MULTIPLIER:1.04,BOUGHT:0,DOM:document.getElementById("shopBtnBlockChance")}},H=document.getElementById("textOutput"),X=document.getElementById("canvas"),w=document.getElementById("goldCount"),z=document.getElementById("dayNight"),I={red:183,green:255,blue:255},u={red:255,green:221,blue:138},N={red:44,green:47,blue:107};let s=183,L=255,a=255,_=0;const Y=document.getElementById("tickCounter"),j=document.getElementById("debugButton");function v(e){e.statFrame!==void 0&&(e.statFrame.spnAttack.innerHTML=Math.round(e.DAMAGE).toFixed(0),e.statFrame.spnHealthMax.innerHTML=Math.round(e.HEALTH_MAX).toString(),e.statFrame.spnAttackSpeed.innerHTML=(f/e.ATTACK_COOLDOWN*10).toFixed(2))}function B(){w.innerHTML=T.GOLD.toString()}function d(e,E=!1){const{healthBar:A}=e,o=e.HEALTH_MAX,i=e.HEALTH_CURRENT;A.value=i,E&&(A.max=o,A.low=o/3,A.high=o/2,A.optimum=o*.67)}function m(e,E=!1){e.attackTimerBar.value=e.ATTACK_TIMER,E&&(e.attackTimerBar.max=e.ATTACK_COOLDOWN)}function q(e,E){H.innerHTML+=`<${E}><br>${e}<${E}>`,H.scrollTop=H.scrollHeight}function R(e){let E=e.BASE_POWER+e.BOUGHT*e.POWER_MULTIPLIER;return e.NAME===n.ATTACK_SPEED.NAME&&(E=e.BASE_POWER/(1+e.BOUGHT*e.POWER_MULTIPLIER)),(e.NAME===n.CRIT_CHANCE.NAME||e===n.BLOCK_CHANCE)&&(E=e.BASE_POWER+e.BOUGHT/1e3*e.POWER_MULTIPLIER),e===n.CRIT_MULTIPLIER&&(E=e.BASE_POWER+e.BOUGHT/100*e.POWER_MULTIPLIER),E>=1?Number(E.toFixed(0)):E>=.1?Number(E.toFixed(1)):E>=.01?Number(E.toFixed(2)):Number(E.toFixed(3))}function k(e){return Math.round(e.BASE_COST+e.BASE_COST*e.COST_MULTIPLIER*e.BOUGHT)}function C(e){const E=k(e);let A=R(e);if(e===n.BLOCK_CHANCE||e===n.CRIT_CHANCE){const o=`${A.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${E} Gold<br>+ ${o}`}else if(e===n.ATTACK_SPEED)e.DOM.innerHTML=`${e.NAME}<br>${E} Gold<br>- ${A*15} ms`;else if(e===n.CRIT_MULTIPLIER){A*=100;const o=`${A.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${E} Gold<br>+ ${o}`}else e.DOM.innerHTML=`${e.NAME}<br>${E} Gold<br>+ ${A}`;console.log(`updated shop${e}`)}function J(){T.DAMAGE+=R(n.ATTACK),T.HEALTH_MAX+=R(n.ATTACK),T.HEALTH_REGEN+=R(n.HEALTH_REGEN),T.CRIT_CHANCE+=R(n.CRIT_CHANCE)/100,T.CRIT_MULTIPLIER+=R(n.CRIT_MULTIPLIER),T.BLOCK_CHANCE+=R(n.BLOCK_CHANCE),T.ATTACK_COOLDOWN-=R(n.ATTACK_SPEED)}function Q(){t.HEALTH_MAX=t.base.HEALTH_MAX+t.LEVEL*t.multiplier.HEALTH_MAX,t.DAMAGE=t.base.DAMAGE+t.LEVEL*t.multiplier.DAMAGE,t.GOLD_DROP=t.base.GOLD_DROP+t.LEVEL*t.multiplier.GOLD_DROP,t.HEALTH_REGEN=t.base.HEALTH_REGEN+t.LEVEL*t.multiplier.HEALTH_REGEN,d(t,!0)}function c(e){e.COST=k(e),T.GOLD>=e.COST&&(T.GOLD-=e.COST,B(),C(e),J(),v(T),e.BOUGHT+=1)}function M(e,E){e.IS_ALIVE&&E!=null?e.HEALTH_CURRENT+=E:!e.IS_ALIVE&&E!=null?e.HEALTH_CURRENT=E:e.HEALTH_CURRENT=e.HEALTH_MAX}function P(e){e.IS_RESPAWNING=!0,e.image.src!==e.frameState.dead&&(e.image.src=e.frameState.dead);const E=150;e.RESPAWN_TIMER+=1,e.RESPAWN_TIMER>=E&&(e.IS_PLAYABLE_CHARACTER===!1?(t.LEVEL+=1,T.GOLD+=t.GOLD_DROP,B()):(t.LEVEL>10?t.LEVEL-=10:t.LEVEL=1,M(t)),Q(),M(e),e.RESPAWN_TIMER=0,e.IS_ALIVE=!0,e.IS_RESPAWNING=!1,e.ATTACK_TIMER=0,e.image.src=e.frameState.idle[0],d(e))}function D(e){e.HEALTH_CURRENT<e.HEALTH_MAX&&(M(e,e.HEALTH_REGEN/(1e3/f)),d(e))}function Z(e){Math.floor(e.HEALTH_CURRENT)<=0&&(e.IS_ALIVE=!1,P(e))}function ee(e,E){let A=0;const o=Math.random();if(E.BLOCK_CHANCE>=o)A=e.DAMAGE*.2;else{const i=Math.random();e.CRIT_CHANCE>=i?A=e.DAMAGE*e.CRIT_MULTIPLIER:A=e.DAMAGE}return A}function y(e,E){const A=ee(e,E);E.HEALTH_CURRENT-=A,e.ATTACK_TIMER=0,d(E),q(`${e.NAME} attacks ${E.NAME} and deals ${A} damage!`),Z(E)}function g(e,E){!e.IS_ALIVE||!E.IS_ALIVE||(e.ATTACK_TIMER+=1,m(e),e.ATTACK_TIMER>=e.ATTACK_COOLDOWN&&(e.IS_ATTACKING=!0))}function l(e,E,A=1){return e<E?e+=A:e>E&&(e-=A),e}function Ee(){_+=.1,_>=360&&(_=0),z.style.transform=`rotate(${_}deg)`,_>=300||_<=50?(s=l(s,I.red,.6),a=l(a,I.green,.6),L=l(L,I.blue,.6)):_<300&&_>250||_>50&&_<90?(s=l(s,u.red,.6),a=l(a,u.green,.6),L=l(L,u.blue,.6)):_>90&&_<250&&(s=l(s,N.red,.6),a=l(a,N.green,.6),L=l(L,N.blue,.6)),X.style.backgroundColor=`rgb(${s},${a},${L})`}function p(e){e.IS_ATTACKING=!1,e.ATTACK_TIMER=0,e.CHARGE_TIMER=0}function te(){const o=T.portrait,i=t.portrait;T.IS_ATTACKING?(T.IS_FRONT_OF_OPPONENT||(T.xPos+=1,o.style.left=`${T.xPos}%`),T.xPos+t.xPosReversed>=50&&(T.IS_FRONT_OF_OPPONENT=!0),T.IS_FRONT_OF_OPPONENT&&(T.CHARGE_TIMER+=1),T.CHARGE_TIMER>=T.CHARGE_COOLDOWN&&(y(T,t),p(T),T.IS_FRONT_OF_OPPONENT=!1)):!T.IS_ATTACKING&&T.xPos>5&&(T.xPos-=1,o.style.left=`${T.xPos}%`),t.IS_ATTACKING?(t.IS_FRONT_OF_OPPONENT||(t.xPosReversed+=1,i.style.right=`${t.xPosReversed}%`),T.xPos+t.xPosReversed>=50&&(t.IS_FRONT_OF_OPPONENT=!0),t.IS_FRONT_OF_OPPONENT&&(t.CHARGE_TIMER+=1,t.CHARGE_TIMER>=t.CHARGE_COOLDOWN&&(y(t,T),p(t),t.IS_FRONT_OF_OPPONENT=!1))):!t.IS_ATTACKING&&t.xPosReversed>5&&(t.xPosReversed-=1,i.style.right=`${t.xPosReversed}%`),Ee()}j.addEventListener("click",()=>{console.log(T),console.log(t),console.log(n)});function ne(){const e=document.getElementById("degreeSpn");e.innerHTML=`${_.toFixed(1)}<br>red: ${s.toFixed(1)}<br>green: ${a.toFixed(1)}<br>blue: ${L.toFixed(1)}`}const Te=document.getElementById("ticksPerSecond"),Ae=new Date;let K=Ae.getTime(),S=0;function ie(){if(S+=1,S===100){const E=new Date().getTime(),A=1e3/((E-K)/100);Te.innerHTML=A.toFixed(2),K=E,S=0}}function V(){G+=1,Y.innerHTML=G.toString(),g(T,t),g(t,T),D(T),D(t),T.IS_RESPAWNING&&P(T),t.IS_RESPAWNING&&P(t),te(),ie(),ne(),setTimeout(V,f)}var U;(U=n.ATTACK.DOM)==null||U.addEventListener("click",()=>{c(n.ATTACK),C(n.ATTACK)});var b;(b=n.HEALTH.DOM)==null||b.addEventListener("click",()=>{c(n.HEALTH),C(n.HEALTH)});var W;(W=n.HEALTH_REGEN.DOM)==null||W.addEventListener("click",()=>{c(n.HEALTH_REGEN),C(n.HEALTH_REGEN)});var F;(F=n.ATTACK_SPEED.DOM)==null||F.addEventListener("click",()=>{c(n.ATTACK_SPEED),C(n.ATTACK_SPEED)});var x;(x=n.CRIT_CHANCE.DOM)==null||x.addEventListener("click",()=>{c(n.CRIT_CHANCE),C(n.CRIT_CHANCE)});var h;(h=n.CRIT_MULTIPLIER.DOM)==null||h.addEventListener("click",()=>{c(n.CRIT_MULTIPLIER),C(n.CRIT_MULTIPLIER)});var $;($=n.BLOCK_CHANCE.DOM)==null||$.addEventListener("click",()=>{c(n.BLOCK_CHANCE),C(n.BLOCK_CHANCE)});C(n.ATTACK);C(n.HEALTH);C(n.HEALTH_REGEN);C(n.ATTACK_SPEED);C(n.CRIT_CHANCE);C(n.CRIT_MULTIPLIER);C(n.BLOCK_CHANCE);v(T);d(T);B();m(T,!0);d(t);m(t,!0);V();
