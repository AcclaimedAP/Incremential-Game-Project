(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))A(o);new MutationObserver(o=>{for(const s of o)if(s.type==="childList")for(const d of s.addedNodes)d.tagName==="LINK"&&d.rel==="modulepreload"&&A(d)}).observe(document,{childList:!0,subtree:!0});function i(o){const s={};return o.integrity&&(s.integrity=o.integrity),o.referrerpolicy&&(s.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?s.credentials="include":o.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function A(o){if(o.ep)return;o.ep=!0;const s=i(o);fetch(o.href,s)}})();const E={NAME:"PlayerName",HEALTH_MAX:100,HEALTH_CURRENT:100,HEALTH_REGEN:1,DAMAGE:5,ATTACK_TIMER:0,ATTACK_COOLDOWN:220,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD:5,RESPAWN_TIMER:0,PRESTIGE_ENABLED:!1,PRESTIGE_LEVEL:0,PRESTIGE_EXP:0,PRESTIGE_EXP_LEVELUP:10,PRESTIGE_EXP_LEVELUP_MULTIPLIER:1.7,HIGHEST_LEVEL_REACHED:0,HIGHEST_LEVEL_PRESTIGED_AT:0,PRESTIGE_POINTS:0,prestige_upgrades:{tier0:{BONUS_DAMAGE:{NAME:"Play Hard",DESCRIPTION:"Increases your damage by 25% per level",BOUGHT:0,MULTIPLIER:.25}},tier1:{REDUCE_BLOCK:{NAME:"Sneak around",DESCRIPTION:"Reduce the enemies chance to block by 1%",BOUGHT:0,MULTIPLIER:.01},LIFESTEAL:{NAME:"Bloodthirst",DESCRIPTION:"Gain life equal to 5% of damage dealt",BOUGHT:0,MULTIPLIER:.05},GOLD_MULTIPLIER:{NAME:"Stock Market",DESCRIPTION:"Gain 100% extra gold each time you kill an enemy",BOUGHT:0,MULTIPLIER:1}},tier2:{SMITE:{NAME:"Smite",DESCRIPTION:"Deal damage 25% of your attack every  600th tick",BOUGHT:0,MULTIPLIER:.25,TIMER:0}},tier3:{BLOCK_PENETRATION:{NAME:"Right through",DESCRIPTION:"When the enemy blocks, deal bonus damage",BOUGHT:0,MULTIPLIER:.1}}},base:{HEALTH_MAX:100,HEALTH_REGEN:1,DAMAGE:5,ATTACK_COOLDOWN:220,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD:5},IS_PLAYABLE_CHARACTER:!0,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPos:0,portrait:document.getElementById("playerPortrait"),image:document.getElementById("playerImage"),frameState:{idle:["assets/combatzone/player/player_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("playerHealthBar"),attackTimerBar:document.getElementById("playerAttackBar"),statFrame:{spnAttack:document.getElementById("spnPlayerAttack"),spnHealthMax:document.getElementById("spnPlayerHealthMax"),spnHealthRegen:document.getElementById("spnPlayerHealthRegen"),spnAttackSpeed:document.getElementById("spnPlayerAttackSpeed"),spnCritChance:document.getElementById("spnPlayerCritChance"),spnCritMultiplier:document.getElementById("spnPlayerCritMultiplier"),spnBlockChance:document.getElementById("spnPlayerBlockChance"),spnLevel:document.getElementById("spnEnemyLevel")}},t={NAME:"Slime",HEALTH_MAX:20,HEALTH_CURRENT:20,HEALTH_REGEN:.1,DAMAGE:3,ATTACK_TIMER:0,ATTACK_COOLDOWN:310,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD_DROP:5,RESPAWN_TIMER:0,LEVEL:1,base:{HEALTH_MAX:20,HEALTH_REGEN:.1,DAMAGE:3,ATTACK_COOLDOWN:310,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD_DROP:5},multiplier:{HEALTH_MAX:1.6,HEALTH_REGEN:.1,DAMAGE:1.4,GOLD_DROP:1.5},IS_PLAYABLE_CHARACTER:!1,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPosReversed:0,portrait:document.getElementById("enemyPortrait"),image:document.getElementById("enemyImage"),frameState:{idle:["assets/combatzone/enemy/slime_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("enemyHealthBar"),attackTimerBar:document.getElementById("enemyAttackBar")},T={ATTACK:{NAME:"ATTACK",COST:0,BASE_COST:5,BASE_POWER:2,COST_MULTIPLIER:1.6,POWER_MULTIPLIER:1.3,BOUGHT:0,DOM:document.getElementById("shopBtnAttack")},HEALTH:{NAME:"HEALTH",COST:0,BASE_COST:4,BASE_POWER:5,COST_MULTIPLIER:1.4,POWER_MULTIPLIER:1.25,BOUGHT:0,DOM:document.getElementById("shopBtnHealth")},HEALTH_REGEN:{NAME:"HEALTH REGENERATION",COST:0,BASE_COST:6,BASE_POWER:1,COST_MULTIPLIER:1.2,POWER_MULTIPLIER:.15,BOUGHT:0,DOM:document.getElementById("shopBtnHealthRegen")},ATTACK_SPEED:{NAME:"ATTACK SPEED",COST:0,BASE_COST:30,BASE_POWER:3,COST_MULTIPLIER:2.1,POWER_MULTIPLIER:.9,BOUGHT:0,DOM:document.getElementById("shopBtnAttackSpeed")},CRIT_CHANCE:{NAME:"CRIT CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.5,POWER_MULTIPLIER:.6,BOUGHT:1,DOM:document.getElementById("shopBtnCritChance")},CRIT_MULTIPLIER:{NAME:"CRIT MULTIPLIER",COST:0,BASE_COST:6,BASE_POWER:.1,COST_MULTIPLIER:1.1,POWER_MULTIPLIER:1.1,BOUGHT:0,DOM:document.getElementById("shopBtnCritMultiplier")},BLOCK_CHANCE:{NAME:"BLOCK CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.9,POWER_MULTIPLIER:1.04,BOUGHT:0,DOM:document.getElementById("shopBtnBlockChance")}},B=15;let b=0;const u=document.getElementById("textOutput"),Y=document.getElementById("canvas"),oe=document.getElementById("goldCount"),Ae=document.getElementById("dayNight"),P={red:183,green:255,blue:255},S={red:255,green:221,blue:138},M={red:44,green:47,blue:107};let C=183,_=255,c=255,l=0;const h=document.querySelectorAll(".btnMenu"),O=document.querySelectorAll(".menuFrame"),se=document.getElementById("spnPoints"),Le=document.getElementById("spnLevel"),ae=document.getElementById("spnCurrentExp"),le=document.getElementById("spnMaxExp"),j=document.getElementById("btnPrestige"),re=document.getElementById("tickCounter"),Ce=document.getElementById("debugButton");function J(e,n=0){return e?(n+=1,J(Math.floor(e/10),n)):n}function _e(e){let n=J(e);const i=96;let A=0;console.log(`Number: ${e}`);let o=e.toFixed();if(console.log(`Finalstring: ${o}, stringLength: ${n}`),n>=4){for(;n>=4;)A+=1,n-=3;const s=1e3**A;e/=s,console.log(e),e>100?o=Math.round(e).toString()+String.fromCharCode(i+A):e>10?o=e.toFixed(1)+String.fromCharCode(i+A):o=e.toFixed(2)+String.fromCharCode(i+A)}return o}function ce(e){if(e.classList.contains("hidden")){for(let n=0;n<O.length;n+=1)O[n].classList.contains("hidden")||O[n].classList.add("hidden");e.classList.remove("hidden")}}function Q(e,n,i){var U;const A=Math.random()*100-50,o=Math.random()*100-50,s=-120,d=-100,a=document.createElement("span");switch(a.classList.add("displayText"),i){case"crit":a.classList.add("displayTextCrit"),a.innerHTML+=`<ruby>${e} <rp>(</rp><rt>Crit!</rt><rp>)</rp></ruby>`;break;case"gold":a.classList.add("displayTextGold"),a.innerHTML=`+${e} Gold`;break;case"block":a.classList.add("displayTextBlock"),a.innerHTML+=`<ruby>${e} <rp>(</rp><rt>Block!</rt><rp>)</rp></ruby>`;break;default:a.innerHTML=e;break}const D=(U=n.image)==null?void 0:U.getBoundingClientRect();a.style.left=`${(D.left-s+A).toString()}px`,a.style.top=`${(D.top-d+o).toString()}px`,Y.appendChild(a);const y=a.animate([{transform:"translateY(0px)",opacity:"1"},{transform:"translateY(-100px)",opacity:"0"}],{duration:2500,iterations:1,easing:"ease-in-out"});y.play(),y.onfinish=()=>{a.remove()}}function p(e){e.statFrame!==void 0&&(e.statFrame.spnAttack.innerHTML=Math.round(e.DAMAGE).toFixed(0),e.statFrame.spnHealthMax.innerHTML=Math.round(e.HEALTH_MAX).toString(),e.statFrame.spnHealthRegen.innerHTML=e.HEALTH_REGEN.toFixed(1),e.statFrame.spnAttackSpeed.innerHTML=(B/e.ATTACK_COOLDOWN*10).toFixed(2),e.statFrame.spnCritChance.innerHTML=`${(e.CRIT_CHANCE*100).toFixed(2)}%`,e.statFrame.spnCritMultiplier.innerHTML=`${(e.CRIT_MULTIPLIER*100).toString()}%`,e.statFrame.spnBlockChance.innerHTML=`${(e.BLOCK_CHANCE*100).toFixed(2)}%`,e.statFrame.spnLevel.innerHTML=`${t.LEVEL}`)}function g(){oe.innerHTML=_e(E.GOLD)}function Z(){se.innerHTML=E.PRESTIGE_POINTS.toString(),Le.innerHTML=E.PRESTIGE_LEVEL.toString(),ae.innerHTML=E.PRESTIGE_EXP.toString(),le.innerHTML=te().toString()}function H(e,n=!1){const{healthBar:i}=e,A=e.HEALTH_MAX,o=e.HEALTH_CURRENT;i.value=o,n&&(i.max=A,i.low=A/3,i.high=A/2,i.optimum=A*.67)}function f(e,n=!1){e.attackTimerBar.value=e.ATTACK_TIMER,n&&(e.attackTimerBar.max=e.ATTACK_COOLDOWN)}function Re(e,n){u.innerHTML+=`<${n}><br>${e}<${n}>`,u.scrollTop=u.scrollHeight}function R(e){let n=e.BASE_POWER+e.BOUGHT*e.POWER_MULTIPLIER;return e.NAME===T.ATTACK_SPEED.NAME&&(n=e.BASE_POWER/(1+e.BOUGHT*e.POWER_MULTIPLIER)),(e.NAME===T.CRIT_CHANCE.NAME||e===T.BLOCK_CHANCE)&&(n=e.BASE_POWER+e.BOUGHT/1e3*e.POWER_MULTIPLIER),e===T.CRIT_MULTIPLIER&&(n=e.BASE_POWER+e.BOUGHT/100*e.POWER_MULTIPLIER),n>=1?Number(n.toFixed(0)):n>=.1?Number(n.toFixed(1)):n>=.01?Number(n.toFixed(2)):Number(n.toFixed(3))}function ee(e){return Math.round(e.BASE_COST+e.BASE_COST*e.COST_MULTIPLIER*e.BOUGHT)}function L(e){const n=ee(e);let i=R(e);if(e===T.BLOCK_CHANCE||e===T.CRIT_CHANCE){const A=`${i.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>+ ${A}`}else if(e===T.ATTACK_SPEED)e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>- ${i*15} ms`;else if(e===T.CRIT_MULTIPLIER){i*=100;const A=`${i.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>+ ${A}`}else e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>+ ${i}`}function Ee(){E.DAMAGE=E.base.DAMAGE+R(T.ATTACK),E.HEALTH_MAX=E.base.HEALTH_MAX+R(T.HEALTH),E.HEALTH_REGEN=E.base.HEALTH_REGEN+R(T.HEALTH_REGEN),E.CRIT_CHANCE=E.base.CRIT_CHANCE+R(T.CRIT_CHANCE)/100,E.CRIT_MULTIPLIER=E.base.CRIT_MULTIPLIER+R(T.CRIT_MULTIPLIER),E.BLOCK_CHANCE=E.base.BLOCK_CHANCE+R(T.BLOCK_CHANCE),E.ATTACK_COOLDOWN=E.base.ATTACK_COOLDOWN-R(T.ATTACK_SPEED)}function de(){t.HEALTH_MAX=t.base.HEALTH_MAX+t.LEVEL*t.multiplier.HEALTH_MAX,t.DAMAGE=t.base.DAMAGE+t.LEVEL*t.multiplier.DAMAGE,t.GOLD_DROP=t.base.GOLD_DROP+t.LEVEL*t.multiplier.GOLD_DROP,t.HEALTH_REGEN=t.base.HEALTH_REGEN+t.LEVEL*t.multiplier.HEALTH_REGEN,t.BLOCK_CHANCE=t.base.BLOCK_CHANCE+t.LEVEL/1e3,H(t,!0)}function I(e){e.COST=ee(e),E.GOLD>=e.COST&&(E.GOLD-=e.COST,g(),L(e),Ee(),p(E),e.BOUGHT+=1)}function te(){return E.PRESTIGE_EXP_LEVELUP+E.PRESTIGE_EXP_LEVELUP*E.PRESTIGE_LEVEL*E.PRESTIGE_EXP_LEVELUP_MULTIPLIER}function ne(){const e=te();E.PRESTIGE_EXP>=e&&(E.PRESTIGE_LEVEL+=1,E.PRESTIGE_POINTS+=1,E.PRESTIGE_EXP-=e,ne())}function Ie(){const e=t.LEVEL-E.HIGHEST_LEVEL_PRESTIGED_AT;let n=0;console.log(`levels climbed${e}`),e>0?(E.HIGHEST_LEVEL_PRESTIGED_AT=E.HIGHEST_LEVEL_REACHED,n=e/2.5+t.LEVEL/80):n=t.LEVEL/80,E.PRESTIGE_EXP+=Math.round(n)}function He(){L(T.ATTACK),L(T.HEALTH),L(T.HEALTH_REGEN),L(T.ATTACK_SPEED),L(T.CRIT_CHANCE),L(T.CRIT_MULTIPLIER),L(T.BLOCK_CHANCE)}function Te(){Ee(),p(E),H(E),g(),f(E,!0),H(t),f(t,!0),Z(),He()}function m(e,n){e.IS_ALIVE&&n!=null?e.HEALTH_CURRENT+=n:!e.IS_ALIVE&&n!=null?e.HEALTH_CURRENT=n:e.HEALTH_CURRENT=e.HEALTH_MAX}function G(e){e.IS_RESPAWNING=!0,e.image.src!==e.frameState.dead&&(e.image.src=e.frameState.dead);const n=150;e.RESPAWN_TIMER+=1,e.RESPAWN_TIMER>=n&&(e.IS_PLAYABLE_CHARACTER===!1?(t.LEVEL+=1,!E.PRESTIGE_ENABLED&&t.LEVEL>=50&&(E.PRESTIGE_ENABLED=!0,j.disabled=!1),E.GOLD+=t.GOLD_DROP,Q(t.GOLD_DROP.toString(),E,"gold"),g(),p(E),E.HIGHEST_LEVEL_REACHED<=t.LEVEL&&(E.HIGHEST_LEVEL_REACHED=t.LEVEL)):(t.LEVEL>10?t.LEVEL-=10:t.LEVEL=1,m(t)),de(),m(e),e.RESPAWN_TIMER=0,e.IS_ALIVE=!0,e.IS_RESPAWNING=!1,e.ATTACK_TIMER=0,e.image.src=e.frameState.idle[0],H(e))}function K(e){e.HEALTH_CURRENT<e.HEALTH_MAX&&(m(e,e.HEALTH_REGEN/(1e3/B)),H(e))}function Oe(e){Math.floor(e.HEALTH_CURRENT)<=0&&(e.IS_ALIVE=!1,G(e))}function ue(e,n){let i=0;const A=Math.random();let o="normal";if(n.BLOCK_CHANCE>=A)o="block",i=e.DAMAGE*.2;else{const d=Math.random();e.CRIT_CHANCE>=d?(i=e.DAMAGE*e.CRIT_MULTIPLIER,o="crit"):i=e.DAMAGE}return[i,o]}function x(e,n){const i=ue(e,n);n.HEALTH_CURRENT-=i[0],e.ATTACK_TIMER=0,H(n),Re(`${e.NAME} attacks ${n.NAME} and deals ${i[0]} damage!`),Q(i[0].toFixed(0),n,i[1]),Oe(n)}function F(e,n){!e.IS_ALIVE||!n.IS_ALIVE||(e.ATTACK_TIMER+=1,f(e),e.ATTACK_TIMER>=e.ATTACK_COOLDOWN&&(e.IS_ATTACKING=!0))}function r(e,n,i=1){return e<n?e+=i:e>n&&(e-=i),e}function Pe(){l+=.1,l>=360&&(l=0),Ae.style.transform=`rotate(${l}deg)`,l>=300||l<=50?(C=r(C,P.red,.6),c=r(c,P.green,.6),_=r(_,P.blue,.6)):l<300&&l>250||l>50&&l<90?(C=r(C,S.red,.6),c=r(c,S.green,.6),_=r(_,S.blue,.6)):l>90&&l<250&&(C=r(C,M.red,.6),c=r(c,M.green,.6),_=r(_,M.blue,.6)),Y.style.backgroundColor=`rgb(${C},${c},${_})`}function W(e){e.IS_ATTACKING=!1,e.ATTACK_TIMER=0,e.CHARGE_TIMER=0}function Se(){const A=E.portrait,o=t.portrait;E.IS_ATTACKING?(E.IS_FRONT_OF_OPPONENT||(E.xPos+=1,A.style.left=`${E.xPos}%`),E.xPos+t.xPosReversed>=50&&(E.IS_FRONT_OF_OPPONENT=!0),E.IS_FRONT_OF_OPPONENT&&(E.CHARGE_TIMER+=1),E.CHARGE_TIMER>=E.CHARGE_COOLDOWN&&(x(E,t),W(E),E.IS_FRONT_OF_OPPONENT=!1)):!E.IS_ATTACKING&&E.xPos>5&&(E.xPos-=1,A.style.left=`${E.xPos}%`),t.IS_ATTACKING?(t.IS_FRONT_OF_OPPONENT||(t.xPosReversed+=1,o.style.right=`${t.xPosReversed}%`),E.xPos+t.xPosReversed>=50&&(t.IS_FRONT_OF_OPPONENT=!0),t.IS_FRONT_OF_OPPONENT&&(t.CHARGE_TIMER+=1,t.CHARGE_TIMER>=t.CHARGE_COOLDOWN&&(x(t,E),W(t),t.IS_FRONT_OF_OPPONENT=!1))):!t.IS_ATTACKING&&t.xPosReversed>5&&(t.xPosReversed-=1,o.style.right=`${t.xPosReversed}%`),Pe()}Ce.addEventListener("click",()=>{console.log(E),console.log(t),console.log(T)});function Me(){const e=document.getElementById("degreeSpn");e.innerHTML=`${l.toFixed(1)}<br>red: ${C.toFixed(1)}<br>green: ${c.toFixed(1)}<br>blue: ${_.toFixed(1)}`}const Ne=document.getElementById("ticksPerSecond"),fe=new Date;let k=fe.getTime(),N=0;function me(){if(N+=1,N===100){const n=new Date().getTime(),i=1e3/((n-k)/100);Ne.innerHTML=i.toFixed(2),k=n,N=0}}function Ge(){E.DAMAGE=E.base.DAMAGE,E.HEALTH_MAX=E.base.HEALTH_MAX,E.HEALTH_CURRENT=E.base.HEALTH_MAX,E.HEALTH_REGEN=E.base.HEALTH_REGEN,E.ATTACK_COOLDOWN=E.base.ATTACK_COOLDOWN,E.ATTACK_TIMER=0,E.BLOCK_CHANCE=E.base.BLOCK_CHANCE,E.CRIT_CHANCE=E.base.CRIT_CHANCE,E.CRIT_MULTIPLIER=E.base.CRIT_MULTIPLIER,E.GOLD=E.base.GOLD,t.DAMAGE=t.base.DAMAGE,t.HEALTH_MAX=t.base.HEALTH_MAX,t.HEALTH_CURRENT=t.base.HEALTH_MAX,t.HEALTH_REGEN=t.base.HEALTH_REGEN,t.ATTACK_COOLDOWN=t.base.ATTACK_COOLDOWN,t.ATTACK_TIMER=0,t.BLOCK_CHANCE=t.base.BLOCK_CHANCE,t.CRIT_CHANCE=t.base.CRIT_CHANCE,t.CRIT_MULTIPLIER=t.base.CRIT_MULTIPLIER}function ie(){b+=1,re.innerHTML=b.toString(),F(E,t),F(t,E),K(E),K(t),E.IS_RESPAWNING&&G(E),t.IS_RESPAWNING&&G(t),Se(),me(),Me(),setTimeout(ie,B)}var v;(v=T.ATTACK.DOM)==null||v.addEventListener("click",()=>{I(T.ATTACK),L(T.ATTACK)});var $;($=T.HEALTH.DOM)==null||$.addEventListener("click",()=>{I(T.HEALTH),L(T.HEALTH)});var V;(V=T.HEALTH_REGEN.DOM)==null||V.addEventListener("click",()=>{I(T.HEALTH_REGEN),L(T.HEALTH_REGEN)});var X;(X=T.ATTACK_SPEED.DOM)==null||X.addEventListener("click",()=>{I(T.ATTACK_SPEED),L(T.ATTACK_SPEED)});var w;(w=T.CRIT_CHANCE.DOM)==null||w.addEventListener("click",()=>{I(T.CRIT_CHANCE),L(T.CRIT_CHANCE)});var q;(q=T.CRIT_MULTIPLIER.DOM)==null||q.addEventListener("click",()=>{I(T.CRIT_MULTIPLIER),L(T.CRIT_MULTIPLIER)});var z;(z=T.BLOCK_CHANCE.DOM)==null||z.addEventListener("click",()=>{I(T.BLOCK_CHANCE),L(T.BLOCK_CHANCE)});for(let e=0;e<h.length;e+=1)h[e].addEventListener("click",()=>{ce(O[e])});j.addEventListener("click",()=>{console.log("prestige!"),Ie(),ne(),Z(),Ge(),Te()});Te();ie();
