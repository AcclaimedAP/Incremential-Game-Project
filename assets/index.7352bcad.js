(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const A of document.querySelectorAll('link[rel="modulepreload"]'))o(A);new MutationObserver(A=>{for(const l of A)if(l.type==="childList")for(const R of l.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&o(R)}).observe(document,{childList:!0,subtree:!0});function i(A){const l={};return A.integrity&&(l.integrity=A.integrity),A.referrerpolicy&&(l.referrerPolicy=A.referrerpolicy),A.crossorigin==="use-credentials"?l.credentials="include":A.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function o(A){if(A.ep)return;A.ep=!0;const l=i(A);fetch(A.href,l)}})();const B=15;let K=0;const T={NAME:"PlayerName",HEALTH_MAX:100,HEALTH_CURRENT:100,HEALTH_REGEN:1,DAMAGE:5,ATTACK_TIMER:0,ATTACK_COOLDOWN:220,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD:500,RESPAWN_TIMER:0,base:{HEALTH_MAX:100,HEALTH_REGEN:5,DAMAGE:5,ATTACK_COOLDOWN:220,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05},IS_PLAYABLE_CHARACTER:!0,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPos:0,portrait:document.getElementById("playerPortrait"),image:document.getElementById("playerImage"),frameState:{idle:["assets/combatzone/player/player_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("playerHealthBar"),attackTimerBar:document.getElementById("playerAttackBar"),statFrame:{spnAttack:document.getElementById("spnPlayerAttack"),spnHealthMax:document.getElementById("spnPlayerHealthMax"),spnAttackSpeed:document.getElementById("spnPlayerAttackSpeed")}},n={NAME:"Slime",HEALTH_MAX:20,HEALTH_CURRENT:20,HEALTH_REGEN:.1,DAMAGE:3,ATTACK_TIMER:0,ATTACK_COOLDOWN:310,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD_DROP:5,RESPAWN_TIMER:0,LEVEL:1,base:{HEALTH_MAX:20,HEALTH_REGEN:.1,DAMAGE:3,GOLD_DROP:5},multiplier:{HEALTH_MAX:1.6,HEALTH_REGEN:.1,DAMAGE:1.4,GOLD_DROP:1.5},IS_PLAYABLE_CHARACTER:!1,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPosReversed:0,portrait:document.getElementById("enemyPortrait"),image:document.getElementById("enemyImage"),frameState:{idle:["assets/combatzone/enemy/slime_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("enemyHealthBar"),attackTimerBar:document.getElementById("enemyAttackBar")},E={ATTACK:{NAME:"ATTACK",COST:0,BASE_COST:6,BASE_POWER:2,COST_MULTIPLIER:1.6,POWER_MULTIPLIER:1.3,BOUGHT:0,DOM:document.getElementById("shopBtnAttack")},HEALTH:{NAME:"HEALTH",COST:0,BASE_COST:6,BASE_POWER:5,COST_MULTIPLIER:1.4,POWER_MULTIPLIER:1.25,BOUGHT:0,DOM:document.getElementById("shopBtnHealth")},HEALTH_REGEN:{NAME:"HEALTH REGENERATION",COST:0,BASE_COST:6,BASE_POWER:1,COST_MULTIPLIER:1.2,POWER_MULTIPLIER:1.15,BOUGHT:0,DOM:document.getElementById("shopBtnHealthRegen")},ATTACK_SPEED:{NAME:"ATTACK SPEED",COST:0,BASE_COST:30,BASE_POWER:3,COST_MULTIPLIER:2.1,POWER_MULTIPLIER:.9,BOUGHT:0,DOM:document.getElementById("shopBtnAttackSpeed")},CRIT_CHANCE:{NAME:"CRIT CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.5,POWER_MULTIPLIER:.6,BOUGHT:1,DOM:document.getElementById("shopBtnCritChance")},CRIT_MULTIPLIER:{NAME:"CRIT MULTIPLIER",COST:0,BASE_COST:6,BASE_POWER:.1,COST_MULTIPLIER:1.1,POWER_MULTIPLIER:1.1,BOUGHT:0,DOM:document.getElementById("shopBtnCritMultiplier")},BLOCK_CHANCE:{NAME:"BLOCK CHANCE",COST:0,BASE_COST:6,BASE_POWER:.05,COST_MULTIPLIER:1.9,POWER_MULTIPLIER:1.04,BOUGHT:0,DOM:document.getElementById("shopBtnBlockChance")}},I=document.getElementById("textOutput"),z=document.getElementById("canvas"),ee=document.getElementById("goldCount"),te=document.getElementById("dayNight"),S={red:183,green:255,blue:255},N={red:255,green:221,blue:138},M={red:44,green:47,blue:107};let c=183,d=255,_=255,a=0;const U=document.querySelectorAll(".btnMenu"),H=document.querySelectorAll(".MenuFrame"),ne=document.getElementById("tickCounter"),Ee=document.getElementById("debugButton");function Te(e){if(e.classList.contains("hidden")){for(let t=0;t<H.length;t+=1)H[t].classList.contains("hidden")||H[t].classList.add("hidden");e.classList.remove("hidden")}}function q(e,t,i=!1,o){var p;const A=Math.random()*100-50,l=Math.random()*100-50,R=-120,Z=-100,r=document.createElement("span");r.innerHTML=e,r.classList.add("displayText"),i&&(r.classList.add("displayTextCrit"),r.innerHTML+="!"),o&&(r.classList.add("displayTextGold"),r.innerHTML=`+${r.innerHTML} Gold`);const D=(p=t.image)==null?void 0:p.getBoundingClientRect();r.style.left=`${(D.left-R+A).toString()}px`,r.style.top=`${(D.top-Z+l).toString()}px`,z.appendChild(r);const g=r.animate([{transform:"translateY(0px)",opacity:"1"},{transform:"translateY(-100px)",opacity:"0"}],{duration:2500,iterations:1,easing:"ease-in-out"});g.play(),g.onfinish=()=>{r.remove()}}function j(e){e.statFrame!==void 0&&(e.statFrame.spnAttack.innerHTML=Math.round(e.DAMAGE).toFixed(0),e.statFrame.spnHealthMax.innerHTML=Math.round(e.HEALTH_MAX).toString(),e.statFrame.spnAttackSpeed.innerHTML=(B/e.ATTACK_COOLDOWN*10).toFixed(2))}function G(){ee.innerHTML=T.GOLD.toString()}function u(e,t=!1){const{healthBar:i}=e,o=e.HEALTH_MAX,A=e.HEALTH_CURRENT;i.value=A,t&&(i.max=o,i.low=o/3,i.high=o/2,i.optimum=o*.67)}function y(e,t=!1){e.attackTimerBar.value=e.ATTACK_TIMER,t&&(e.attackTimerBar.max=e.ATTACK_COOLDOWN)}function ie(e,t){I.innerHTML+=`<${t}><br>${e}<${t}>`,I.scrollTop=I.scrollHeight}function L(e){let t=e.BASE_POWER+e.BOUGHT*e.POWER_MULTIPLIER;return e.NAME===E.ATTACK_SPEED.NAME&&(t=e.BASE_POWER/(1+e.BOUGHT*e.POWER_MULTIPLIER)),(e.NAME===E.CRIT_CHANCE.NAME||e===E.BLOCK_CHANCE)&&(t=e.BASE_POWER+e.BOUGHT/1e3*e.POWER_MULTIPLIER),e===E.CRIT_MULTIPLIER&&(t=e.BASE_POWER+e.BOUGHT/100*e.POWER_MULTIPLIER),t>=1?Number(t.toFixed(0)):t>=.1?Number(t.toFixed(1)):t>=.01?Number(t.toFixed(2)):Number(t.toFixed(3))}function J(e){return Math.round(e.BASE_COST+e.BASE_COST*e.COST_MULTIPLIER*e.BOUGHT)}function s(e){const t=J(e);let i=L(e);if(e===E.BLOCK_CHANCE||e===E.CRIT_CHANCE){const o=`${i.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${t} Gold<br>+ ${o}`}else if(e===E.ATTACK_SPEED)e.DOM.innerHTML=`${e.NAME}<br>${t} Gold<br>- ${i*15} ms`;else if(e===E.CRIT_MULTIPLIER){i*=100;const o=`${i.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${t} Gold<br>+ ${o}`}else e.DOM.innerHTML=`${e.NAME}<br>${t} Gold<br>+ ${i}`}function Ae(){T.DAMAGE+=L(E.ATTACK),T.HEALTH_MAX+=L(E.ATTACK),T.HEALTH_REGEN+=L(E.HEALTH_REGEN),T.CRIT_CHANCE+=L(E.CRIT_CHANCE)/100,T.CRIT_MULTIPLIER+=L(E.CRIT_MULTIPLIER),T.BLOCK_CHANCE+=L(E.BLOCK_CHANCE),T.ATTACK_COOLDOWN-=L(E.ATTACK_SPEED)}function oe(){n.HEALTH_MAX=n.base.HEALTH_MAX+n.LEVEL*n.multiplier.HEALTH_MAX,n.DAMAGE=n.base.DAMAGE+n.LEVEL*n.multiplier.DAMAGE,n.GOLD_DROP=n.base.GOLD_DROP+n.LEVEL*n.multiplier.GOLD_DROP,n.HEALTH_REGEN=n.base.HEALTH_REGEN+n.LEVEL*n.multiplier.HEALTH_REGEN,u(n,!0)}function O(e){e.COST=J(e),T.GOLD>=e.COST&&(T.GOLD-=e.COST,G(),s(e),Ae(),j(T),e.BOUGHT+=1)}function P(e,t){e.IS_ALIVE&&t!=null?e.HEALTH_CURRENT+=t:!e.IS_ALIVE&&t!=null?e.HEALTH_CURRENT=t:e.HEALTH_CURRENT=e.HEALTH_MAX}function m(e){e.IS_RESPAWNING=!0,e.image.src!==e.frameState.dead&&(e.image.src=e.frameState.dead);const t=150;e.RESPAWN_TIMER+=1,e.RESPAWN_TIMER>=t&&(e.IS_PLAYABLE_CHARACTER===!1?(n.LEVEL+=1,T.GOLD+=n.GOLD_DROP,q(n.GOLD_DROP.toString(),T,!1,!0),G()):(n.LEVEL>10?n.LEVEL-=10:n.LEVEL=1,P(n)),oe(),P(e),e.RESPAWN_TIMER=0,e.IS_ALIVE=!0,e.IS_RESPAWNING=!1,e.ATTACK_TIMER=0,e.image.src=e.frameState.idle[0],u(e))}function b(e){e.HEALTH_CURRENT<e.HEALTH_MAX&&(P(e,e.HEALTH_REGEN/(1e3/B)),u(e))}function se(e){Math.floor(e.HEALTH_CURRENT)<=0&&(e.IS_ALIVE=!1,m(e))}function le(e,t){let i=0;const o=Math.random();let A=!1;if(t.BLOCK_CHANCE>=o)i=e.DAMAGE*.2;else{const R=Math.random();e.CRIT_CHANCE>=R?(i=e.DAMAGE*e.CRIT_MULTIPLIER,A=!0):i=e.DAMAGE}return[i,A]}function x(e,t){const i=le(e,t);t.HEALTH_CURRENT-=i[0],e.ATTACK_TIMER=0,u(t),ie(`${e.NAME} attacks ${t.NAME} and deals ${i[0]} damage!`),q(i[0].toFixed(0),t,i[1]),se(t)}function h(e,t){!e.IS_ALIVE||!t.IS_ALIVE||(e.ATTACK_TIMER+=1,y(e),e.ATTACK_TIMER>=e.ATTACK_COOLDOWN&&(e.IS_ATTACKING=!0))}function C(e,t,i=1){return e<t?e+=i:e>t&&(e-=i),e}function ae(){a+=.1,a>=360&&(a=0),te.style.transform=`rotate(${a}deg)`,a>=300||a<=50?(c=C(c,S.red,.6),_=C(_,S.green,.6),d=C(d,S.blue,.6)):a<300&&a>250||a>50&&a<90?(c=C(c,N.red,.6),_=C(_,N.green,.6),d=C(d,N.blue,.6)):a>90&&a<250&&(c=C(c,M.red,.6),_=C(_,M.green,.6),d=C(d,M.blue,.6)),z.style.backgroundColor=`rgb(${c},${_},${d})`}function W(e){e.IS_ATTACKING=!1,e.ATTACK_TIMER=0,e.CHARGE_TIMER=0}function re(){const o=T.portrait,A=n.portrait;T.IS_ATTACKING?(T.IS_FRONT_OF_OPPONENT||(T.xPos+=1,o.style.left=`${T.xPos}%`),T.xPos+n.xPosReversed>=50&&(T.IS_FRONT_OF_OPPONENT=!0),T.IS_FRONT_OF_OPPONENT&&(T.CHARGE_TIMER+=1),T.CHARGE_TIMER>=T.CHARGE_COOLDOWN&&(x(T,n),W(T),T.IS_FRONT_OF_OPPONENT=!1)):!T.IS_ATTACKING&&T.xPos>5&&(T.xPos-=1,o.style.left=`${T.xPos}%`),n.IS_ATTACKING?(n.IS_FRONT_OF_OPPONENT||(n.xPosReversed+=1,A.style.right=`${n.xPosReversed}%`),T.xPos+n.xPosReversed>=50&&(n.IS_FRONT_OF_OPPONENT=!0),n.IS_FRONT_OF_OPPONENT&&(n.CHARGE_TIMER+=1,n.CHARGE_TIMER>=n.CHARGE_COOLDOWN&&(x(n,T),W(n),n.IS_FRONT_OF_OPPONENT=!1))):!n.IS_ATTACKING&&n.xPosReversed>5&&(n.xPosReversed-=1,A.style.right=`${n.xPosReversed}%`),ae()}Ee.addEventListener("click",()=>{console.log(T),console.log(n),console.log(E)});function Ce(){const e=document.getElementById("degreeSpn");e.innerHTML=`${a.toFixed(1)}<br>red: ${c.toFixed(1)}<br>green: ${_.toFixed(1)}<br>blue: ${d.toFixed(1)}`}const ce=document.getElementById("ticksPerSecond"),de=new Date;let F=de.getTime(),f=0;function _e(){if(f+=1,f===100){const t=new Date().getTime(),i=1e3/((t-F)/100);ce.innerHTML=i.toFixed(2),F=t,f=0}}function Q(){K+=1,ne.innerHTML=K.toString(),h(T,n),h(n,T),b(T),b(n),T.IS_RESPAWNING&&m(T),n.IS_RESPAWNING&&m(n),re(),_e(),Ce(),setTimeout(Q,B)}var $;($=E.ATTACK.DOM)==null||$.addEventListener("click",()=>{O(E.ATTACK),s(E.ATTACK)});var v;(v=E.HEALTH.DOM)==null||v.addEventListener("click",()=>{O(E.HEALTH),s(E.HEALTH)});var k;(k=E.HEALTH_REGEN.DOM)==null||k.addEventListener("click",()=>{O(E.HEALTH_REGEN),s(E.HEALTH_REGEN)});var V;(V=E.ATTACK_SPEED.DOM)==null||V.addEventListener("click",()=>{O(E.ATTACK_SPEED),s(E.ATTACK_SPEED)});var X;(X=E.CRIT_CHANCE.DOM)==null||X.addEventListener("click",()=>{O(E.CRIT_CHANCE),s(E.CRIT_CHANCE)});var w;(w=E.CRIT_MULTIPLIER.DOM)==null||w.addEventListener("click",()=>{O(E.CRIT_MULTIPLIER),s(E.CRIT_MULTIPLIER)});var Y;(Y=E.BLOCK_CHANCE.DOM)==null||Y.addEventListener("click",()=>{O(E.BLOCK_CHANCE),s(E.BLOCK_CHANCE)});for(let e=0;e<U.length;e+=1)U[e].addEventListener("click",()=>{Te(H[e])});s(E.ATTACK);s(E.HEALTH);s(E.HEALTH_REGEN);s(E.ATTACK_SPEED);s(E.CRIT_CHANCE);s(E.CRIT_MULTIPLIER);s(E.BLOCK_CHANCE);j(T);u(T);G();y(T,!0);u(n);y(n,!0);Q();
