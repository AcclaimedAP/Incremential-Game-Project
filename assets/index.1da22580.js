(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const R of l.addedNodes)R.tagName==="LINK"&&R.rel==="modulepreload"&&i(R)}).observe(document,{childList:!0,subtree:!0});function A(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerpolicy&&(l.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?l.credentials="include":o.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=A(o);fetch(o.href,l)}})();const F=15;let m=0;const T={NAME:"PlayerName",HEALTH_MAX:100,HEALTH_CURRENT:100,HEALTH_REGEN:5,DAMAGE:5,ATTACK_TIMER:0,ATTACK_COOLDOWN:220,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD:500,RESPAWN_TIMER:0,base:{HEALTH_MAX:100,HEALTH_REGEN:5,DAMAGE:5,ATTACK_COOLDOWN:220,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05},IS_PLAYABLE_CHARACTER:!0,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPos:0,portrait:document.getElementById("playerPortrait"),image:document.getElementById("playerImage"),frameState:{idle:["assets/combatzone/player/player_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("playerHealthBar"),attackTimerBar:document.getElementById("playerAttackBar"),statFrame:{spnAttack:document.getElementById("spnPlayerAttack"),spnHealthMax:document.getElementById("spnPlayerHealthMax"),spnAttackSpeed:document.getElementById("spnPlayerAttackSpeed")}},t={NAME:"Slime",HEALTH_MAX:20,HEALTH_CURRENT:20,HEALTH_REGEN:.1,DAMAGE:3,ATTACK_TIMER:0,ATTACK_COOLDOWN:310,CHARGE_TIMER:0,CHARGE_COOLDOWN:50,CRIT_CHANCE:.05,CRIT_MULTIPLIER:1.2,BLOCK_CHANCE:.05,GOLD_DROP:5,RESPAWN_TIMER:0,LEVEL:1,base:{HEALTH_MAX:20,HEALTH_REGEN:.1,DAMAGE:3,GOLD_DROP:5},multiplier:{HEALTH_MAX:1.6,HEALTH_REGEN:1.05,DAMAGE:1.4,GOLD_DROP:1.5},IS_PLAYABLE_CHARACTER:!1,IS_ATTACKING:!1,IS_FRONT_OF_OPPONENT:!1,IS_ALIVE:!0,IS_RESPAWNING:!1,xPosReversed:0,portrait:document.getElementById("enemyPortrait"),image:document.getElementById("enemyImage"),frameState:{idle:["assets/combatzone/enemy/slime_idle_1.svg"],dead:"assets/combatzone/universal/gravestone.svg"},healthBar:document.getElementById("enemyHealthBar"),attackTimerBar:document.getElementById("enemyAttackBar")},E={ATTACK:{NAME:"ATTACK",COST:0,BASE_COST:6,BASE_POWER:2,COST_MULTIPLIER:1.6,POWER_MULTIPLIER:1.3,BOUGHT:0,DOM:document.getElementById("shopBtnAttack")},HEALTH:{NAME:"HEALTH",COST:0,BASE_COST:6,BASE_POWER:5,COST_MULTIPLIER:1.4,POWER_MULTIPLIER:1.25,BOUGHT:0,DOM:document.getElementById("shopBtnHealth")},HEALTH_REGEN:{NAME:"HEALTH REGENERATION",COST:0,BASE_COST:6,BASE_POWER:1,COST_MULTIPLIER:1.2,POWER_MULTIPLIER:1.15,BOUGHT:0,DOM:document.getElementById("shopBtnHealthRegen")},ATTACK_SPEED:{NAME:"ATTACK SPEED",COST:0,BASE_COST:6,BASE_POWER:3,COST_MULTIPLIER:2.1,POWER_MULTIPLIER:.9,BOUGHT:0,DOM:document.getElementById("shopBtnAttackSpeed")},CRIT_CHANCE:{NAME:"CRIT CHANCE",COST:0,BASE_COST:6,BASE_POWER:.005,COST_MULTIPLIER:1.5,POWER_MULTIPLIER:1.04,BOUGHT:0,DOM:document.getElementById("shopBtnCritChance")},CRIT_MULTIPLIER:{NAME:"CRIT MULTIPLIER",COST:0,BASE_COST:6,BASE_POWER:.1,COST_MULTIPLIER:1.1,POWER_MULTIPLIER:1.1,BOUGHT:0,DOM:document.getElementById("shopBtnCritMultiplier")},BLOCK_CHANCE:{NAME:"BLOCK CHANCE",COST:0,BASE_COST:6,BASE_POWER:.005,COST_MULTIPLIER:1.9,POWER_MULTIPLIER:1.04,BOUGHT:0,DOM:document.getElementById("shopBtnBlockChance")}},O=document.getElementById("textOutput"),V=document.getElementById("canvas"),X=document.getElementById("goldCount"),w=document.getElementById("dayNight"),I={red:183,green:255,blue:255},u={red:255,green:221,blue:138},H={red:44,green:47,blue:107};let C=183,_=255,c=255,r=0;const z=document.getElementById("tickCounter"),Y=document.getElementById("debugButton");function x(e){e.statFrame!==void 0&&(e.statFrame.spnAttack.innerHTML=Math.round(e.DAMAGE).toFixed(0),e.statFrame.spnHealthMax.innerHTML=Math.round(e.HEALTH_MAX).toString(),e.statFrame.spnAttackSpeed.innerHTML=(F/e.ATTACK_COOLDOWN*10).toFixed(2))}function M(){X.innerHTML=T.GOLD.toString()}function L(e,n=!1){const{healthBar:A}=e,i=e.HEALTH_MAX,o=e.HEALTH_CURRENT;A.value=o,n&&(A.max=i,A.low=i/3,A.high=i/2,A.optimum=i*.67)}function P(e,n=!1){e.attackTimerBar.value=e.ATTACK_TIMER,n&&(e.attackTimerBar.max=e.ATTACK_COOLDOWN)}function j(e,n){O.innerHTML+=`<${n}><br>${e}<${n}>`,O.scrollTop=O.scrollHeight}function v(e){const n=e.BASE_POWER+e.BOUGHT*e.POWER_MULTIPLIER;return n>=1?Number(n.toFixed(0)):n>=.1?Number(n.toFixed(1)):n>=.01?Number(n.toFixed(2)):Number(n.toFixed(3))}function $(e){return Math.round(e.BASE_COST+e.BASE_COST*e.COST_MULTIPLIER*e.BOUGHT)}function s(e){const n=$(e);let A=v(e);if(e===E.BLOCK_CHANCE||e===E.CRIT_CHANCE||e===E.CRIT_MULTIPLIER){A*=100;const i=`${A.toString()}%`;e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>+ ${i}`}else e===E.ATTACK_SPEED?e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>- ${A*10} ms`:e.DOM.innerHTML=`${e.NAME}<br>${n} Gold<br>+ ${A}`;console.log(`updated shop${e}`)}function q(){T.DAMAGE+=v(E.ATTACK),T.HEALTH_MAX+=E.HEALTH.BASE_POWER+E.HEALTH.BOUGHT*E.HEALTH.POWER_MULTIPLIER}function J(){t.HEALTH_MAX=t.base.HEALTH_MAX+t.LEVEL*t.multiplier.HEALTH_MAX,t.DAMAGE=t.base.DAMAGE+t.LEVEL*t.multiplier.DAMAGE,t.GOLD_DROP=t.base.GOLD_DROP+t.LEVEL*t.multiplier.GOLD_DROP,t.HEALTH_REGEN=t.base.HEALTH_REGEN+t.LEVEL*t.multiplier.HEALTH_REGEN,L(t,!0)}function d(e){e.COST=$(e),T.GOLD>=e.COST&&(T.GOLD-=e.COST,M(),s(e),q(),x(T),e.BOUGHT+=1)}function f(e,n){e.IS_ALIVE&&n!=null?e.HEALTH_CURRENT+=n:!e.IS_ALIVE&&n!=null?e.HEALTH_CURRENT=n:e.HEALTH_CURRENT=e.HEALTH_MAX}function N(e){e.IS_RESPAWNING=!0,e.image.src!==e.frameState.dead&&(e.image.src=e.frameState.dead);const n=150;e.RESPAWN_TIMER+=1,e.RESPAWN_TIMER>=n&&(e.IS_PLAYABLE_CHARACTER===!1?(t.LEVEL+=1,T.GOLD+=t.GOLD_DROP,M()):(t.LEVEL>10?t.LEVEL-=10:t.LEVEL=1,f(t)),J(),f(e),e.RESPAWN_TIMER=0,e.IS_ALIVE=!0,e.IS_RESPAWNING=!1,e.ATTACK_TIMER=0,e.image.src=e.frameState.idle[0],L(e))}function Q(e){Math.floor(e.HEALTH_CURRENT)<=0&&(e.IS_ALIVE=!1,N(e))}function Z(e,n){let A=0;const i=Math.random();if(n.BLOCK_CHANCE>=i)A=e.DAMAGE*.2;else{const o=Math.random();e.CRIT_CHANCE>=o?A=e.DAMAGE*e.CRIT_MULTIPLIER:A=e.DAMAGE}return A}function B(e,n){const A=Z(e,n);n.HEALTH_CURRENT-=A,e.ATTACK_TIMER=0,L(n),j(`${e.NAME} attacks ${n.NAME} and deals ${A} damage!`),Q(n)}function G(e,n){!e.IS_ALIVE||!n.IS_ALIVE||(e.ATTACK_TIMER+=1,P(e),e.ATTACK_TIMER>=e.ATTACK_COOLDOWN&&(e.IS_ATTACKING=!0))}function a(e,n,A=1){return e<n?e+=A:e>n&&(e-=A),e}function ee(){r+=.1,r>=360&&(r=0),w.style.transform=`rotate(${r}deg)`,r>=300||r<=50?(C=a(C,I.red,.6),c=a(c,I.green,.6),_=a(_,I.blue,.6)):r<300&&r>250||r>50&&r<90?(C=a(C,u.red,.6),c=a(c,u.green,.6),_=a(_,u.blue,.6)):r>90&&r<250&&(C=a(C,H.red,.6),c=a(c,H.green,.6),_=a(_,H.blue,.6)),V.style.backgroundColor=`rgb(${C},${c},${_})`}function D(e){e.IS_ATTACKING=!1,e.ATTACK_TIMER=0,e.CHARGE_TIMER=0}function te(){const i=T.portrait,o=t.portrait;T.IS_ATTACKING?(T.IS_FRONT_OF_OPPONENT||(T.xPos+=1,i.style.left=`${T.xPos}%`),T.xPos+t.xPosReversed>=50&&(T.IS_FRONT_OF_OPPONENT=!0),T.IS_FRONT_OF_OPPONENT&&(T.CHARGE_TIMER+=1),T.CHARGE_TIMER>=T.CHARGE_COOLDOWN&&(B(T,t),D(T),T.IS_FRONT_OF_OPPONENT=!1)):!T.IS_ATTACKING&&T.xPos>5&&(T.xPos-=1,i.style.left=`${T.xPos}%`),t.IS_ATTACKING?(t.IS_FRONT_OF_OPPONENT||(t.xPosReversed+=1,o.style.right=`${t.xPosReversed}%`),T.xPos+t.xPosReversed>=50&&(t.IS_FRONT_OF_OPPONENT=!0),t.IS_FRONT_OF_OPPONENT&&(t.CHARGE_TIMER+=1,t.CHARGE_TIMER>=t.CHARGE_COOLDOWN&&(B(t,T),D(t),t.IS_FRONT_OF_OPPONENT=!1))):!t.IS_ATTACKING&&t.xPosReversed>5&&(t.xPosReversed-=1,o.style.right=`${t.xPosReversed}%`),ee()}Y.addEventListener("click",()=>{console.log(T),console.log(t),console.log(E)});function ne(){const e=document.getElementById("degreeSpn");e.innerHTML=`${r.toFixed(1)}<br>red: ${C.toFixed(1)}<br>green: ${c.toFixed(1)}<br>blue: ${_.toFixed(1)}`}const Ee=document.getElementById("ticksPerSecond"),Te=new Date;let p=Te.getTime(),S=0;function Ae(){if(S+=1,S===100){const n=new Date().getTime(),A=1e3/((n-p)/100);Ee.innerHTML=A.toFixed(2),p=n,S=0}}function k(){m+=1,z.innerHTML=m.toString(),G(T,t),G(t,T),T.IS_RESPAWNING&&N(T),t.IS_RESPAWNING&&N(t),te(),Ae(),ne(),setTimeout(k,F)}var y;(y=E.ATTACK.DOM)==null||y.addEventListener("click",()=>{d(E.ATTACK),s(E.ATTACK)});var g;(g=E.HEALTH.DOM)==null||g.addEventListener("click",()=>{d(E.HEALTH),s(E.HEALTH)});var h;(h=E.HEALTH_REGEN.DOM)==null||h.addEventListener("click",()=>{d(E.HEALTH_REGEN),s(E.HEALTH_REGEN)});var K;(K=E.ATTACK_SPEED.DOM)==null||K.addEventListener("click",()=>{d(E.ATTACK_SPEED),s(E.ATTACK_SPEED)});var U;(U=E.CRIT_CHANCE.DOM)==null||U.addEventListener("click",()=>{d(E.CRIT_CHANCE),s(E.CRIT_CHANCE)});var b;(b=E.CRIT_MULTIPLIER.DOM)==null||b.addEventListener("click",()=>{d(E.CRIT_MULTIPLIER),s(E.CRIT_MULTIPLIER)});var W;(W=E.BLOCK_CHANCE.DOM)==null||W.addEventListener("click",()=>{d(E.BLOCK_CHANCE),s(E.BLOCK_CHANCE)});s(E.ATTACK);s(E.HEALTH);s(E.HEALTH_REGEN);s(E.ATTACK_SPEED);s(E.CRIT_CHANCE);s(E.CRIT_MULTIPLIER);s(E.BLOCK_CHANCE);x(T);L(T);M();P(T,!0);L(t);P(t,!0);k();
